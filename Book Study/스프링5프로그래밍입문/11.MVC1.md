* 스프링 MVC를 사용해서 웹 어플리케이션을 개발하는 것은 컨트롤러와 뷰 코드를 구현한다는 것입니다.
## 프로젝트 준비
* src/main/java
  * 자바코드, 설정 파일 위치
* src/main/webapp
  * HTML, CSS, JS 등이 위치할 폴더
* src/main/webapp/WEB-INF
  * web.xml 파일이 위치할 폴더
* src/main/webapp/WEB-INF/view
  * 컨트롤러의 결과를 보여줄 JSP 파일 위치

## 요청 매핑 애노테이션을 이용한 경로 매핑
* 웹 어플리케이션을 개발하는 것은 다음의 코드를 작성하는 것입니다.
  * 특정 요청 URL을 처리할 코드
  * 처리 결과를 HTML과 같은 형식으로 응답하는 코드

### 요청 매핑 애노테이션
* @RequestMapping
* @GetMapping
* @PostMapping

```java
@Controller
public class HelloController{
    // "/hello"의 경로를 갖는 get 메서드를 정의하였습니다.
    @GetMapping("/hello")
    public String hello(Model model,
        @RequestParam(value="name", required = false)String name){
            model.addAttribute("greeting", "안녕하세요, " + name);
            return "hello";
        }
}

// 요청 매핑 어노테이션을 중첩해서 적용 할 수 있습니다. 
// @RequestMapping에 method가 없으면 GET, POST 둘다 받습니다.
@Controller
@RequestMapping("/register")
public class RegistController {
    @RequestMapping("/step1")
    public String handleStep1(){
        return "register/step1";
    }

    @RequestMapping("/step2")
    public String handleStep2(){
        return "register/step2";
    }
}
```

## GET과 POST 구분 : @GetMapping, @PostMapping
* @RequestMapping에 별도의 설정이 없으면 GET, POST를 둘다 처리합니다. 
* @GetMapping, @PostMapping을 사용해서 요청을 제한 할 수 있습니다.

## 요청 파라미터 접근
* 컨트롤러 메서드에서 요청 파라미터를 사용하는 첫번째 방법은 `HttpServletRequest`를 직접 이용
  * 컨트롤러 처리 메서드에서 `HttpServletRequest`를 파라미터로 사용하고 getParameter()를 이용해서 구하면 됩니다.
* @RequestParam 애노테이션 속성을 사용합니다.
  * value : String
    * HTTP 요청 파라미터의 이름을 지정합니다.
  * required : boolean
    * 필수 여부를 지정합니다 이 값이 true이면서 값이 없으면 Exception 발생
    * 기본 값은 true입니다.
  * defaultValue : String
    * 요청 파라미터가 값이 없으면 기본값으로 사용합니다.
```java
@Controller
public class RegisterController {
    @RequestMapping("/register/step1")
    public String handleStep1(){
        return "register/step1";
    }

    @PostMapping("/register/step2")
    // HttpServletRequest request를 전달 받고 getParameter메서드로 데이터를 구합니다.
    public String handleStep2(HttpServletRequest request){
        String agreeParam = request.getParameter("agree");
        if(agreeParam == null || !agreeParam.equals("true")){
            return "register/step1";
        }
        return "register/step2";
    }

    @PostMapping("/register/step2")
    public String handleStep2(
        // @RequestParam 애노테이션은 속성을 사용합니다. 
        // value는 검색키, defaultValue는 기본값을 설정합니다. 
        // Boolean 타입으로 변환합니다.
        @RequestParam(value = "agree", defaultValue="false") Boolean agreeVal){
            if(!agree){
                return "register/step1";
            }
            return "register/step2";
        }
}
```

## 리다이렉트 처리
* 잘못된 전송 방식으로 요청이 왔을 때는 에러 화면보다 알맞은 경로 리다이렉트 할 수 도 있습니다.
* 컨트롤러에서 특정 페이지로 리다이렉트시키는 방법은 간단합니다. 
  * `redirect:경로`로 뷰 이름으로 리턴하면 됩니다. 
```java
@Controller
public class RegisterController {

    @GetMapping("/register/step2")
    public String handleStep2Get() {
        return "redirect:/register/step1";
    }
}
```

## 커멘드 객체를 이용해서 요청 파라미터 사용하기 
* 많은 수의 파라미터의 값을 정의할때 너무 많은 코드를 사용할 수 있습니다.
* 요청 파라미터를 커맨드 객체에 담아주는 기능 제공합니다. 
  * 예를 들어서 name인 요청 파라미터의 값을 커맨드 객체의 setName() 메서드를 사용해서 커맨드 객체에 제공합니다. 
```java
@PostMapping("/register/step3")
public String handleStep3(HttpServletRequest request){
    String email = request.getParameter("email");
    String name = request.getParameter("name");
    String password = request.getParameter("password");
    String confirmPassword = request.getParameter("confirmPassword");

    RegisterRequest regReg = new RegisterRequest();
    regReq.setEmail(email);
    regReq.setName(name);
    ...
}

// 다음과 같이 Command 객체로 정의할 수 있습니다.
// RegisterRequest에는 set 메서드가 구현되어 있습니다. 
// setEmail(), setName(), setPassword(), setConfirmPassword()
@PostMapping("/register/step3")
public String handleStep3(RegisterRequest regReq){
    ...
}
```

## 뷰 JSP 코드에서 커맨드 객체 사용하기